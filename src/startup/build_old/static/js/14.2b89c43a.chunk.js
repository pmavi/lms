(this["webpackJsonplegacyfarmer-web-client"]=this["webpackJsonplegacyfarmer-web-client"]||[]).push([[14],{1147:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return E}));var n=a(48),i=a.n(n),c=a(13),r=a(107),l=a(12),o=a(85),s=a.n(o),u=a(302),d=a(0),b=a(49),j=a(1532),p=a(1612),f=a(301),v=a(860),O=a(861),m=a(870),g=a(858),h=a(195),y=a(857),x=a(133),S=a(24),k=a(854),w=a(872),C=a(851),V=a(855),I=a(1),P=s()((function(e){return{paperStyle:{maxHeight:"calc(100% - 1px)",margin:e.spacing(0,0,0,2)},formStyle:{maxHeight:"100%",overflow:"hidden",width:"100%",display:"flex",flexDirection:"column"},infoRootStyle:{height:"fit-content","& > *":{marginRight:e.spacing(1)},overflow:"auto",marginBottom:e.spacing(1)},fileFrameStyle:{height:"fit-content","& > *":{marginRight:e.spacing(1)},overflow:"auto",marginBottom:e.spacing(1)},infoInnerStyle:{padding:e.spacing(0,2)},buttonPanelStyle:{marginLeft:-8,borderTop:"solid 1px ".concat(e.palette.divider),padding:e.spacing(2),"& > *":{marginRight:e.spacing(1)}},titleStyle:{padding:e.spacing(3,2,0)},frameStyle:{},"::placeholder":{color:"#707070 !important"},dividerStyle:{marginBottom:e.spacing(2),width:"100%"},uploadStyle:{position:"sticky",bottom:0,backgroundColor:e.palette.background.paper,marginTop:e.spacing(2),padding:e.spacing(0,2)}}}),{name:"EntityEditStyles"});function E(){var e,t,a,n=P(),o=Object(b.j)().clientId,s=Object(b.h)(),E=Object(b.i)(),K=null===E||void 0===E||null===(e=E.state)||void 0===e?void 0:e.id,N=!K,R=!K&&(null===E||void 0===E||null===(t=E.state)||void 0===t?void 0:t.parentEntityId),L=!K&&(null===E||void 0===E||null===(a=E.state)||void 0===a?void 0:a.isActive),D={id:Object(p.a)(),name:"",ein:"",isActive:L,clientId:o,entityId:R,isDeleted:!1},T=Object(d.useState)(!1),z=Object(l.a)(T,2),W=z[0],F=z[1],M=Object(g.a)(N?D:void 0,N?["isActive","entityId","clientId"]:void 0),B=Object(l.a)(M,3),A=B[0],_=B[1],H=B[2],J=H.setEditValues,q=H.isChanged,G=void 0!==q&&q,Q=H.setIsChanged,U=H.defaultValues,X=H.setDefaultValues,Y=H.resetValues,Z=Object(k.a)(f.t,{variables:{entityId:K},skip:!Object(j.a)(K)},"entity.type"),$=Object(l.a)(Z,1)[0],ee=Object(S.e)(f.x),te=Object(l.a)(ee,1)[0];Object(d.useEffect)((function(){(null===$||void 0===$?void 0:$.entity)&&X(null===$||void 0===$?void 0:$.entity)}),[$,X]);var ae=Object(d.useCallback)((function(){Y(),Object(u.defer)((function(){E.state={edit:void 0,id:void 0,selectEntityId:R,isActive:L},s.replace(E)}))}),[Y,s,L,E,R]);Object(w.a)(ae);var ne=Object(d.useCallback)(Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G){e.next=21;break}return e.prev=1,t=Object(c.a)({},A),F(!0),e.next=6,te({variables:t,optimisticResponse:{__typename:"Mutation",entity:Object(c.a)(Object(c.a)(Object(c.a)({__typename:"Entity"},U),t),{},{clientId:o,entityId:R||"",isDeleted:!1})},update:N?Object(C.e)(Object(f.Cb)(o,L),A.id,"entity"):void 0});case 6:E.state=Object(c.a)(Object(c.a)({},E.state),{},{id:A.id}),s.replace(E),Q(!1),J({}),X(A),ae(),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:return e.prev=16,F(!1),e.finish(16);case 19:e.next=21;break;case 21:case"end":return e.stop()}}),e,null,[[1,14,16,19]])}))),[G,A,te,U,o,R,N,L,E,s,Q,J,X]);return Object(I.jsxs)(h.a,{container:!0,fullWidth:!0,fullHeight:!0,className:n.frameStyle,direction:"column",overflow:"visible",wrap:"nowrap",children:[Object(I.jsx)(x.a,{variant:"h5",id:"entity.title.label",color:"textSecondary",gutterBottom:!0,className:n.titleStyle}),Object(I.jsxs)(O.a,{onSubmit:ne,className:n.formStyle,children:[Object(I.jsx)(m.a,{when:G}),Object(I.jsx)(h.a,{name:"Entity Edit Root",container:!0,item:!0,fullWidth:!0,className:n.infoRootStyle,children:Object(I.jsxs)(h.a,{name:"Entity Edit Root",container:!0,item:!0,fullWidth:!0,className:n.infoInnerStyle,children:[Object(I.jsx)(V.a,{name:"name",autoFocus:!0,required:!0,labelKey:"entity.name.label",defaultValue:U.name,value:A.name,onChange:_},"name"+U.id),Object(I.jsx)(V.a,{name:"description",labelKey:"entity.description.label",defaultValue:U.description,value:A.description,onChange:_,multiline:!0,maxRows:4,minRows:2},"description"+U.id),Object(I.jsx)(V.a,{name:"ein",labelKey:"entity.ein.label",defaultValue:U.ein,value:A.ein,onChange:_},"ein"+U.id)]})}),Object(I.jsx)(h.a,{container:!0,item:!0,direction:"row",fullWidth:!0,className:n.buttonPanelStyle,overflow:"visible",resizable:!1,children:Object(I.jsxs)(h.a,{item:!0,children:[Object(I.jsx)(y.a,{isProgress:W,variant:"text",color:"primary",type:"submit",size:"large",labelKey:"save.label",disabled:W||!G}),Object(I.jsx)(v.a,{variant:"text",size:"large",labelKey:"cancel.button",disabled:W,onClick:function(){return ae()}})]})})]})]})}},855:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var n=a(13),i=a(34),c=a(254),r=a.n(c),l=a(1610),o=a(63),s=a.n(o),u=a(0),d=a(878),b=a(307),j=a(879),p=a(309),f=a(1),v=r()({palette:{text:{secondary:"#707070",primary:"#527928"}}});function O(e){var t=e.className,a=e.name,c=e.labelKey,r=e.placeholderKey,o=e.helpKey,O=e.helperText,m=e.defaultValue,g=e.value,h=e.onChange,y=e.margin,x=void 0===y?"normal":y,S=e.InputLabelProps,k=e.InputProps,w=e.label,C=e.fullWidth,V=void 0===C||C,I=e.isFormattedNumber,P=e.variant,E=void 0===P?"outlined":P,K=e.size,N=void 0===K?"small":K,R=e.labelTemplate,L=(e.editData,e.classes),D=e.internalKey,T=e.placeholder,z=Object(i.a)(e,["className","name","labelKey","placeholderKey","helpKey","helperText","defaultValue","value","onChange","margin","InputLabelProps","InputProps","label","fullWidth","isFormattedNumber","variant","size","labelTemplate","editData","classes","internalKey","placeholder"]),W=Object(n.a)({},L),F=(null===R||void 0===R?void 0:R.format({name:a}))||c,M=Object(b.a)(F,w),B=Object(b.a)(r)||T,A=Object(b.a)(o,O)||O,_=Object(n.a)({},k);return I&&((s()(k,"inputComponent")||s()(k,"inputProps.component"))&&console.log("isFormattedNumber cannot have a different input component.",k),_.inputComponent=j.a,_.inputProps=Object(n.a)(Object(n.a)(Object(n.a)({},s()(k,"inputProps",{})),z.inputProps||{}),{},{component:d.a})),Object(f.jsx)(p.a,{theme:v,children:Object(u.createElement)(l.a,Object(n.a)(Object(n.a)({},z),{},{key:"internal"+D,name:a,className:"".concat(W.textFieldStyle," ").concat(t),label:M,placeholder:B,helperText:A,defaultValue:m,value:g,onChange:h,InputProps:_,InputLabelProps:Object(n.a)(Object(n.a)({},S),{},{shrink:!0}),variant:E,size:N,margin:x,fullWidth:V}))})}},857:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(13),i=a(34),c=a(822),r=a(253),l=a(85),o=a.n(l),s=(a(0),a(133)),u=a(1),d=o()((function(e){return{spinnerMargin:{marginLeft:e.spacing(.5),color:"white"},darkSpinnerMargin:{marginLeft:e.spacing(.5),color:e.palette.primary.main}}}),{name:"ProgressButtonStyles"});function b(e){var t,a=e.isProgress,l=void 0!==a&&a,o=e.labelKey,b=e.isSpinnerLight,j=void 0!==b&&b,p=e.children,f=e.typographyProps,v=Object(i.a)(e,["isProgress","labelKey","isSpinnerLight","children","typographyProps"]),O=d();return Object(u.jsxs)(c.a,Object(n.a)(Object(n.a)({},v),{},{children:[o&&Object(u.jsx)(s.a,Object(n.a)({variant:"inherit",id:o},f)),p,l&&Object(u.jsx)(r.a,{className:(null===v||void 0===v||null===(t=v.classes)||void 0===t?void 0:t.spinnerMargin)||(j?O.spinnerMargin:O.darkSpinnerMargin),size:15,thickness:2.5})]}))}},858:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a(35),i=a(13),c=a(64),r=a(12),l=a(63),o=a.n(l),s=a(54),u=a.n(s),d=a(894),b=a.n(d),j=a(0),p=a(1612),f=a(134);function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3?arguments[3]:void 0,s=Object(j.useState)(!1),d=Object(r.a)(s,2),v=d[0],O=d[1],m=Object(j.useState)(e||(a?[]:{})),g=Object(r.a)(m,2),h=g[0],y=g[1],x=Object(j.useState)(a?[]:u()(t)?{}:t),S=Object(r.a)(x,2),k=S[0],w=S[1];Object(j.useEffect)((function(){var e;h&&!a&&(e=u()(t)?b()(h,["id"].concat(Object(c.a)(t))):Object(i.a)({},h),w(Object(i.a)(Object(i.a)({},k),e)))}),[h,a]);var C=function(e,n,r,o,s){var d=o;if(a)V(e);else{var j,p;if(o?j=Object(i.a)(Object(i.a)({},k),o):(d=Object(f.c)(e,n,r,!0,o,s),j=Object(i.a)(Object(i.a)({},k),d)),w(j),l)p=u()(t)?b()(h,["id"].concat(Object(c.a)(t))):Object(i.a)({},h),null===l||void 0===l||l(Object(i.a)(Object(i.a)({},p),d),j);"reset"!==r&&O(!0)}return d},V=function(e){var a=o()(e,"target.dataset.index"),r=Object(f.c)(e,void 0,void 0,!1),l=r.componentName,s=r.newValue,d=k[a];if(d)k[a]=Object(i.a)(Object(i.a)({},d),{},Object(n.a)({},l,s));else{var j={};if(u()(h)){var v=o()(h,"[".concat(a,"]"));v&&(j=u()(t)?b()(v,t):{uuid:v,id:v.id})}else h&&(u()(t)?(j=b()(h,t)).uuid=Object(p.a)():j={uuid:Object(p.a)(),id:h.id});k[a]=Object(i.a)(Object(n.a)({},l,s),j)}w(Object(c.a)(k)),O(!0)},I=Object(j.useCallback)((function(n){var r,l=n||e||(a?[]:{});r=u()(t)?b()(l,["id"].concat(Object(c.a)(t))):Object(i.a)({},l),w(Object(i.a)({},r)),y(l),O(!1)}),[a]),P=function(e,t){w((function(a){return Object(i.a)(Object(i.a)({},a),{},Object(n.a)({},t,e))})),O(!0)},E=Object(j.useCallback)((function(e,t){var a=o()(k,e);return void 0!==a?a:o()(h,e)||t}),[k,h]),K=Object(j.useCallback)((function(e,a){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Object(i.a)(Object(i.a)({},k),{},Object(n.a)({},e,a));(w((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(n.a)({},e,a))})),o&&O(!0),l)&&(r=u()(t)?b()(h,["id"].concat(Object(c.a)(t))):Object(i.a)({},h),null===l||void 0===l||l(Object(i.a)(Object(i.a)({},r),s),s))}),[k,h]),N=Object(j.useCallback)((function(e){return Object(f.j)(E(e))}),[E]);return[k,C,{handleSelectChange:P,isChanged:v,setIsChanged:O,setEditValues:w,defaultValues:h,setDefaultValues:y,resetValues:I,getValue:E,setValue:K,hasValue:N}]}},861:function(e,t,a){"use strict";var n=a(13),i=a(34),c=a(0),r=a(1),l=Object(c.forwardRef)((function(e,t){var a=e.onSubmit,l=e.onValid,o=e.validate,s=e.customValidity,u=e.reportInvalid,d=e.children,b=Object(i.a)(e,["onSubmit","onValid","validate","customValidity","reportInvalid","children"]),j=Object(c.useRef)(),p=t||j;Object(c.useEffect)((function(){o&&function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=p.current;return!a||((e=a.checkValidity())&&s&&(e=s()),!e&&t?a.reportValidity():e)}(u)&&l&&l()}),[o,u,s,l,p]);return Object(r.jsx)("form",Object(n.a)(Object(n.a)({ref:p,onSubmit:function(e){e&&e.preventDefault(),e&&e.stopPropagation();var t=p.current,n=!0;if(s&&(n=s()),!n&&u)return t.reportValidity();n&&a&&a(e)}},b),{},{className:b.className,children:d}))}));l.defaultProps={validate:!1,reportInvalid:!0},t.a=l},870:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(13),i=a(34),c=a(0),r=a(99),l=a(49),o=a(134),s=a(1);function u(e){var t=e.when,a=e.messageKey,u=void 0===a?"leavePage":a,d=e.message,b=Object(i.a)(e,["when","messageKey","message"]),j=Object(r.a)(),p=Object(l.i)(),f=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&p&&e.pathname!==window.location.pathname)return u?Object(o.f)(j,"leavePage","Discard changes?"):d}),[j,d,u,p]);return Object(s.jsx)(l.a,Object(n.a)({when:t,message:f},b))}},872:function(e,t,a){"use strict";var n=a(0),i=a(23),c=a.n(i);function r(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,c=Object(n.useCallback)((function(n){!a&&n.defaultPrevented||("Escape"===n.key&&e?(n.preventDefault(),e(n)):"Enter"===n.key&&t?t(n):null===i||void 0===i||i(n))}),[a,e,i,t]);return Object(n.useEffect)((function(){document.addEventListener("keydown",c,!1)}),[c]),Object(n.useLayoutEffect)((function(){return function(){document.removeEventListener("keydown",c,!1)}}),[c]),[c,t,e]}r.propTypes={onClose:c.a.func,onSubmit:c.a.func},t.a=r},883:function(e,t,a){var n=a(314),i=a(895);e.exports=function e(t,a,c,r,l){var o=-1,s=t.length;for(c||(c=i),l||(l=[]);++o<s;){var u=t[o];a>0&&c(u)?a>1?e(u,a-1,c,r,l):n(l,u):r||(l[l.length]=u)}return l}},894:function(e,t,a){var n=a(926),i=a(927)((function(e,t){return null==e?{}:n(e,t)}));e.exports=i},895:function(e,t,a){var n=a(136),i=a(171),c=a(54),r=n?n.isConcatSpreadable:void 0;e.exports=function(e){return c(e)||i(e)||!!(r&&e&&e[r])}},926:function(e,t,a){var n=a(468),i=a(467);e.exports=function(e,t){return n(e,t,(function(t,a){return i(e,a)}))}},927:function(e,t,a){var n=a(928),i=a(464),c=a(465);e.exports=function(e){return c(i(e,void 0,n),e+"")}},928:function(e,t,a){var n=a(883);e.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}}}]);
//# sourceMappingURL=14.2b89c43a.chunk.js.map